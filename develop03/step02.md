# Step02: ì´ë¯¸ì§€ ì¸ë„¤ì¼ ìƒì„± ì‹œìŠ¤í…œ

## ğŸ¯ ëª©í‘œ

ì—…ë¡œë“œëœ ì´ë¯¸ì§€ íŒŒì¼ì— ëŒ€í•´ ìë™ìœ¼ë¡œ ì¸ë„¤ì¼ì„ ìƒì„±í•˜ì—¬ ëª©ë¡ì—ì„œ ë¹ ë¥¸ ë¯¸ë¦¬ë³´ê¸°ë¥¼ ì œê³µí•˜ê³ , ì´ë¯¸ì§€ ë¡œë”© ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤.

## âš ï¸ ì¤‘ìš”: ì´ë¯¸ì§€ ì¸ë„¤ì¼ì˜ í•„ìš”ì„±

### ê¸°ì¡´ ì‹œìŠ¤í…œì˜ ë¬¸ì œì 

- **ë¡œë”© ì†ë„**: ì›ë³¸ ì´ë¯¸ì§€ í¬ê¸°ë¡œ ì¸í•œ ëŠë¦° í˜ì´ì§€ ë¡œë”©
- **ëŒ€ì—­í­ ë‚­ë¹„**: ëª©ë¡ì—ì„œ ì‘ì€ í¬ê¸°ë¡œ í‘œì‹œë˜ëŠ”ë°ë„ ì›ë³¸ ì´ë¯¸ì§€ ì „ì†¡
- **ì‚¬ìš©ì ê²½í—˜**: ì´ë¯¸ì§€ê°€ ì™„ì „íˆ ë¡œë“œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë ¤ì•¼ í•¨
- **ëª¨ë°”ì¼ í™˜ê²½**: ì‘ì€ í™”ë©´ì—ì„œ í° ì´ë¯¸ì§€ ì²˜ë¦¬ ì‹œ ì„±ëŠ¥ ì €í•˜

### ì¸ë„¤ì¼ ì‹œìŠ¤í…œì˜ ì¥ì 

- **ë¹ ë¥¸ ë¡œë”©**: ì‘ì€ í¬ê¸°ì˜ ì¸ë„¤ì¼ë¡œ ë¹ ë¥¸ í™”ë©´ í‘œì‹œ
- **ëŒ€ì—­í­ ì ˆì•½**: í•„ìš”í•œ í¬ê¸°ë§Œí¼ë§Œ ì´ë¯¸ì§€ ì „ì†¡
- **ë°˜ì‘í˜• UI**: ë‹¤ì–‘í•œ í™”ë©´ í¬ê¸°ì— ìµœì í™”ëœ ì´ë¯¸ì§€ ì œê³µ
- **ì‚¬ìš©ì í¸ì˜ì„±**: ëª©ë¡ì—ì„œ ì´ë¯¸ì§€ ë‚´ìš©ì„ í•œëˆˆì— íŒŒì•… ê°€ëŠ¥

## ğŸ“š ì´ë¡  í¬ì¸íŠ¸ ë¦¬ë§ˆì¸ë“œ

### 1. ì´ë¯¸ì§€ ì²˜ë¦¬ ì›ë¦¬

- **í”½ì…€ ê¸°ë°˜**: ì´ë¯¸ì§€ëŠ” í”½ì…€ì˜ 2ì°¨ì› ë°°ì—´ë¡œ êµ¬ì„±
- **ë¦¬ìƒ˜í”Œë§**: í¬ê¸° ë³€ê²½ ì‹œ í”½ì…€ ì •ë³´ë¥¼ ì¬ê³„ì‚°
- **ì••ì¶•**: JPEG, PNG ë“± ë‹¤ì–‘í•œ ì••ì¶• ì•Œê³ ë¦¬ì¦˜ ì‚¬ìš©

### 2. ì¸ë„¤ì¼ ìƒì„± ë°©ì‹

- **ë¦¬ì‚¬ì´ì§•**: ì›ë³¸ ì´ë¯¸ì§€ í¬ê¸°ë¥¼ ì¤„ì—¬ì„œ ì¸ë„¤ì¼ ìƒì„±
- **í¬ë¡­í•‘**: ì›ë³¸ ì´ë¯¸ì§€ì˜ ì¼ë¶€ë¥¼ ì˜ë¼ì„œ ì¸ë„¤ì¼ ìƒì„±
- **ë¹„ìœ¨ ìœ ì§€**: ì›ë³¸ ì´ë¯¸ì§€ì˜ ê°€ë¡œì„¸ë¡œ ë¹„ìœ¨ì„ ìœ ì§€í•˜ë©´ì„œ í¬ê¸° ì¡°ì •

### 3. ì´ë¯¸ì§€ í¬ë§·ë³„ íŠ¹ì§•

- **JPEG**: ì‚¬ì§„ì— ì í•©, ì••ì¶•ë¥  ë†’ìŒ, íˆ¬ëª…ë„ ë¯¸ì§€ì›
- **PNG**: íˆ¬ëª…ë„ ì§€ì›, ë¬´ì†ì‹¤ ì••ì¶•, íŒŒì¼ í¬ê¸° í¼
- **GIF**: ì• ë‹ˆë©”ì´ì…˜ ì§€ì›, ìƒ‰ìƒ ìˆ˜ ì œí•œ

## ğŸš€ ì‹¤ìŠµ ë‹¨ê³„ë³„ ì§„í–‰

### 1ë‹¨ê³„: ThumbnailGenerator ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤ ìƒì„±

#### ThumbnailGenerator.java ìƒì„±

```java
package io.goorm.backend.util;

import javax.imageio.ImageIO;
import java.awt.*;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;

/**
 * ì´ë¯¸ì§€ ì¸ë„¤ì¼ ìƒì„±ì„ ìœ„í•œ ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤
 */
public class ThumbnailGenerator {

    // ê¸°ë³¸ ì¸ë„¤ì¼ í¬ê¸°ë“¤
    public static final int THUMBNAIL_SMALL = 150;   // 150x150
    public static final int THUMBNAIL_MEDIUM = 300;  // 300x300
    public static final int THUMBNAIL_LARGE = 500;   // 500x500

    /**
     * ì´ë¯¸ì§€ íŒŒì¼ì—ì„œ ì¸ë„¤ì¼ ìƒì„±
     *
     * @param sourcePath ì›ë³¸ ì´ë¯¸ì§€ íŒŒì¼ ê²½ë¡œ
     * @param targetPath ì¸ë„¤ì¼ ì €ì¥ ê²½ë¡œ
     * @param maxSize ì¸ë„¤ì¼ì˜ ìµœëŒ€ í¬ê¸° (ê°€ë¡œ/ì„¸ë¡œ)
     * @return ìƒì„± ì„±ê³µ ì—¬ë¶€
     */
    public static boolean generateThumbnail(String sourcePath, String targetPath, int maxSize) {
        try {
            // ì›ë³¸ ì´ë¯¸ì§€ ë¡œë“œ
            BufferedImage sourceImage = ImageIO.read(new File(sourcePath));
            if (sourceImage == null) {
                return false;
            }

            // ì¸ë„¤ì¼ í¬ê¸° ê³„ì‚° (ë¹„ìœ¨ ìœ ì§€)
            Dimension thumbnailSize = calculateThumbnailSize(
                sourceImage.getWidth(),
                sourceImage.getHeight(),
                maxSize
            );

            // ì¸ë„¤ì¼ ì´ë¯¸ì§€ ìƒì„±
            BufferedImage thumbnail = createThumbnail(sourceImage, thumbnailSize);

            // ì¸ë„¤ì¼ ì €ì¥
            return saveThumbnail(thumbnail, targetPath);

        } catch (IOException e) {
            e.printStackTrace();
            return false;
        }
    }

    /**
     * ì¸ë„¤ì¼ í¬ê¸° ê³„ì‚° (ë¹„ìœ¨ ìœ ì§€)
     */
    private static Dimension calculateThumbnailSize(int originalWidth, int originalHeight, int maxSize) {
        double ratio = Math.min(
            (double) maxSize / originalWidth,
            (double) maxSize / originalHeight
        );

        int newWidth = (int) (originalWidth * ratio);
        int newHeight = (int) (originalHeight * ratio);

        return new Dimension(newWidth, newHeight);
    }

    /**
     * ì¸ë„¤ì¼ ì´ë¯¸ì§€ ìƒì„±
     */
    private static BufferedImage createThumbnail(BufferedImage source, Dimension size) {
        // ì¸ë„¤ì¼ìš© BufferedImage ìƒì„±
        BufferedImage thumbnail = new BufferedImage(
            size.width,
            size.height,
            BufferedImage.TYPE_INT_RGB
        );

        // Graphics2D ê°ì²´ ìƒì„± ë° ì„¤ì •
        Graphics2D g2d = thumbnail.createGraphics();

        // ë Œë”ë§ í’ˆì§ˆ ì„¤ì •
        g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);
        g2d.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

        // ì¸ë„¤ì¼ ê·¸ë¦¬ê¸°
        g2d.drawImage(source, 0, 0, size.width, size.height, null);

        // Graphics2D í•´ì œ
        g2d.dispose();

        return thumbnail;
    }

    /**
     * ì¸ë„¤ì¼ ì €ì¥
     */
    private static boolean saveThumbnail(BufferedImage thumbnail, String targetPath) {
        try {
            // ë””ë ‰í† ë¦¬ ìƒì„±
            Path path = Paths.get(targetPath);
            Files.createDirectories(path.getParent());

            // íŒŒì¼ í™•ì¥ìì— ë”°ë¥¸ í¬ë§· ê²°ì •
            String format = getImageFormat(targetPath);

            // ì¸ë„¤ì¼ ì €ì¥
            return ImageIO.write(thumbnail, format, new File(targetPath));

        } catch (IOException e) {
            e.printStackTrace();
            return false;
        }
    }

    /**
     * íŒŒì¼ ê²½ë¡œì—ì„œ ì´ë¯¸ì§€ í¬ë§· ì¶”ì¶œ
     */
    private static String getImageFormat(String filePath) {
        String extension = filePath.substring(filePath.lastIndexOf(".") + 1).toLowerCase();

        switch (extension) {
            case "jpg":
            case "jpeg":
                return "JPEG";
            case "png":
                return "PNG";
            case "gif":
                return "GIF";
            default:
                return "JPEG"; // ê¸°ë³¸ê°’
        }
    }

    /**
     * ì—¬ëŸ¬ í¬ê¸°ì˜ ì¸ë„¤ì¼ì„ í•œ ë²ˆì— ìƒì„±
     */
    public static boolean generateMultipleThumbnails(String sourcePath, String baseDir, String fileName) {
        boolean success = true;

        // íŒŒì¼ëª…ì—ì„œ í™•ì¥ì ì œê±°
        String nameWithoutExt = fileName.substring(0, fileName.lastIndexOf("."));
        String extension = fileName.substring(fileName.lastIndexOf("."));

        // ì—¬ëŸ¬ í¬ê¸°ì˜ ì¸ë„¤ì¼ ìƒì„±
        int[] sizes = {THUMBNAIL_SMALL, THUMBNAIL_MEDIUM, THUMBNAIL_LARGE};

        for (int size : sizes) {
            String thumbnailPath = baseDir + "/" + nameWithoutExt + "_" + size + extension;
            if (!generateThumbnail(sourcePath, thumbnailPath, size)) {
                success = false;
            }
        }

        return success;
    }

    /**
     * ì¸ë„¤ì¼ íŒŒì¼ ì¡´ì¬ ì—¬ë¶€ í™•ì¸
     */
    public static boolean thumbnailExists(String thumbnailPath) {
        return Files.exists(Paths.get(thumbnailPath));
    }

    /**
     * ì¸ë„¤ì¼ íŒŒì¼ ì‚­ì œ
     */
    public static boolean deleteThumbnail(String thumbnailPath) {
        try {
            return Files.deleteIfExists(Paths.get(thumbnailPath));
        } catch (IOException e) {
            e.printStackTrace();
            return false;
        }
    }
}
```

### 2ë‹¨ê³„: FileUpload ëª¨ë¸ì— ì¸ë„¤ì¼ ì •ë³´ ì¶”ê°€

#### FileUpload.java ìˆ˜ì •

```java
// ê¸°ì¡´ FileUpload í´ë˜ìŠ¤ì— ì¸ë„¤ì¼ ê´€ë ¨ í•„ë“œ ì¶”ê°€

public class FileUpload {
    // ê¸°ì¡´ í•„ë“œë“¤...
            private Long id;
    private int boardId;
    private String originalName;
    private String storedName;
    private long fileSize;
    private String fileType;
    private Date uploadDate;

    // ì¸ë„¤ì¼ ê´€ë ¨ í•„ë“œ ì¶”ê°€
    private String thumbnailSmallPath;   // 150x150 ì¸ë„¤ì¼ ê²½ë¡œ
    private String thumbnailMediumPath;  // 300x300 ì¸ë„¤ì¼ ê²½ë¡œ
    private String thumbnailLargePath;   // 500x500 ì¸ë„¤ì¼ ê²½ë¡œ
    private boolean thumbnailGenerated;  // ì¸ë„¤ì¼ ìƒì„± ì™„ë£Œ ì—¬ë¶€

    // ê¸°ì¡´ getter/setter...

    // ì¸ë„¤ì¼ ê´€ë ¨ getter/setter
    public String getThumbnailSmallPath() { return thumbnailSmallPath; }
    public void setThumbnailSmallPath(String thumbnailSmallPath) { this.thumbnailSmallPath = thumbnailSmallPath; }

    public String getThumbnailMediumPath() { return thumbnailMediumPath; }
    public void setThumbnailMediumPath(String thumbnailMediumPath) { this.thumbnailMediumPath = thumbnailMediumPath; }

    public String getThumbnailLargePath() { return thumbnailLargePath; }
    public void setThumbnailLargePath(String thumbnailLargePath) { this.thumbnailLargePath = thumbnailLargePath; }

    public boolean isThumbnailGenerated() { return thumbnailGenerated; }
    public void setThumbnailGenerated(boolean thumbnailGenerated) { this.thumbnailGenerated = thumbnailGenerated; }

    /**
     * íŠ¹ì • í¬ê¸°ì˜ ì¸ë„¤ì¼ ê²½ë¡œ ë°˜í™˜
     */
    public String getThumbnailPath(int size) {
        switch (size) {
            case 150: return thumbnailSmallPath;
            case 300: return thumbnailMediumPath;
            case 500: return thumbnailLargePath;
            default: return thumbnailSmallPath;
        }
    }

    /**
     * ì´ë¯¸ì§€ íŒŒì¼ ì—¬ë¶€ í™•ì¸
     */
    public boolean isImageFile() {
        return fileType != null && fileType.startsWith("image/");
    }
}
```

### 3ë‹¨ê³„: FileUploadDAOì— ì¸ë„¤ì¼ ê´€ë ¨ ë©”ì„œë“œ ì¶”ê°€

#### FileUploadDAO.java ìˆ˜ì •

```java
// ê¸°ì¡´ FileUploadDAOì— ì¸ë„¤ì¼ ê´€ë ¨ ë©”ì„œë“œ ì¶”ê°€

/**
 * ì¸ë„¤ì¼ ì •ë³´ ì—…ë°ì´íŠ¸
 */
public boolean updateThumbnailInfo(int fileId, String thumbnailSmallPath,
                                 String thumbnailMediumPath, String thumbnailLargePath) {
    String sql = "UPDATE file_upload SET " +
                 "thumbnail_small_path = ?, " +
                 "thumbnail_medium_path = ?, " +
                 "thumbnail_large_path = ?, " +
                 "thumbnail_generated = true " +
                 "WHERE id = ?";

    try (Connection conn = getConnection();
         PreparedStatement pstmt = conn.prepareStatement(sql)) {

        pstmt.setString(1, thumbnailSmallPath);
        pstmt.setString(2, thumbnailMediumPath);
        pstmt.setString(3, thumbnailLargePath);
        pstmt.setInt(4, fileId);

        return pstmt.executeUpdate() > 0;

    } catch (SQLException e) {
        e.printStackTrace();
        return false;
    }
}

/**
 * ì¸ë„¤ì¼ ìƒì„±ì´ í•„ìš”í•œ ì´ë¯¸ì§€ íŒŒì¼ ëª©ë¡ ì¡°íšŒ
 */
public List<FileUpload> getImageFilesWithoutThumbnail() {
    String sql = "SELECT * FROM file_upload " +
                 "WHERE file_type LIKE 'image/%' " +
                 "AND (thumbnail_generated = false OR thumbnail_generated IS NULL)";

    List<FileUpload> files = new ArrayList<>();

    try (Connection conn = getConnection();
         PreparedStatement pstmt = conn.prepareStatement(sql);
         ResultSet rs = pstmt.executeQuery()) {

        while (rs.next()) {
            FileUpload file = mapResultSetToFileUpload(rs);
            files.add(file);
        }

    } catch (SQLException e) {
        e.printStackTrace();
    }

    return files;
}

/**
 * ê²Œì‹œê¸€ì˜ ëª¨ë“  ì´ë¯¸ì§€ íŒŒì¼ ì¡°íšŒ (ì¸ë„¤ì¼ í¬í•¨)
 */
public List<FileUpload> getImageFilesWithThumbnails(int boardId) {
    String sql = "SELECT * FROM file_upload " +
                 "WHERE board_id = ? AND file_type LIKE 'image/%' " +
                 "ORDER BY upload_date DESC";

    List<FileUpload> files = new ArrayList<>();

    try (Connection conn = getConnection();
         PreparedStatement pstmt = conn.prepareStatement(sql)) {

        pstmt.setInt(1, boardId);

        try (ResultSet rs = pstmt.executeQuery()) {
            while (rs.next()) {
                FileUpload file = mapResultSetToFileUpload(rs);
                files.add(file);
            }
        }

    } catch (SQLException e) {
        e.printStackTrace();
    }

    return files;
}
```

### 4ë‹¨ê³„: FileUploadCommandì—ì„œ ì¸ë„¤ì¼ ìë™ ìƒì„±

#### FileUploadCommand.java ìˆ˜ì •

```java
// ê¸°ì¡´ FileUploadCommandì˜ íŒŒì¼ ì—…ë¡œë“œ ì²˜ë¦¬ ë¶€ë¶„ì— ì¸ë„¤ì¼ ìƒì„± ë¡œì§ ì¶”ê°€

/**
 * íŒŒì¼ ì—…ë¡œë“œ í›„ ì¸ë„¤ì¼ ìƒì„±
 */
private void generateThumbnailsForImage(FileUpload fileUpload, String uploadPath) {
    // ì´ë¯¸ì§€ íŒŒì¼ì¸ ê²½ìš°ì—ë§Œ ì¸ë„¤ì¼ ìƒì„±
    if (!fileUpload.isImageFile()) {
        return;
    }

    try {
        // ì¸ë„¤ì¼ ì €ì¥ ë””ë ‰í† ë¦¬ ì„¤ì •
        String thumbnailDir = uploadPath + "/thumbnails";

        // ì›ë³¸ íŒŒì¼ ê²½ë¡œ
        String sourcePath = uploadPath + "/" + fileUpload.getStoredName();

        // ì—¬ëŸ¬ í¬ê¸°ì˜ ì¸ë„¤ì¼ ìƒì„±
        boolean success = ThumbnailGenerator.generateMultipleThumbnails(
            sourcePath,
            thumbnailDir,
            fileUpload.getStoredName()
        );

        if (success) {
            // ì¸ë„¤ì¼ ê²½ë¡œ ì„¤ì •
            String nameWithoutExt = fileUpload.getStoredName().substring(0,
                fileUpload.getStoredName().lastIndexOf("."));
            String extension = fileUpload.getStoredName().substring(
                fileUpload.getStoredName().lastIndexOf("."));

            fileUpload.setThumbnailSmallPath("thumbnails/" + nameWithoutExt + "_150" + extension);
            fileUpload.setThumbnailMediumPath("thumbnails/" + nameWithoutExt + "_300" + extension);
            fileUpload.setThumbnailLargePath("thumbnails/" + nameWithoutExt + "_500" + extension);

            // ë°ì´í„°ë² ì´ìŠ¤ì— ì¸ë„¤ì¼ ì •ë³´ ì—…ë°ì´íŠ¸
            FileUploadDAO fileUploadDAO = new FileUploadDAO();
            fileUploadDAO.updateThumbnailInfo(
                fileUpload.getId(),
                fileUpload.getThumbnailSmallPath(),
                fileUpload.getThumbnailMediumPath(),
                fileUpload.getThumbnailLargePath()
            );
        }

    } catch (Exception e) {
        e.printStackTrace();
        // ì¸ë„¤ì¼ ìƒì„± ì‹¤íŒ¨ ì‹œì—ë„ íŒŒì¼ ì—…ë¡œë“œëŠ” ì„±ê³µìœ¼ë¡œ ì²˜ë¦¬
    }
}
```

### 5ë‹¨ê³„: JSPì—ì„œ ì¸ë„¤ì¼ í‘œì‹œ

#### list.jsp ìˆ˜ì • (ê²Œì‹œê¸€ ëª©ë¡ì—ì„œ ì¸ë„¤ì¼ í‘œì‹œ)

```jsp
<!-- ê²Œì‹œê¸€ ëª©ë¡ í…Œì´ë¸”ì— ì¸ë„¤ì¼ ì»¬ëŸ¼ ì¶”ê°€ -->
<thead class="bg-gray-50">
    <tr>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ë²ˆí˜¸</th>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ì¸ë„¤ì¼</th>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ì œëª©</th>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ì‘ì„±ì</th>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ì²¨ë¶€íŒŒì¼</th>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ì‘ì„±ì¼</th>
    </tr>
</thead>

<!-- ê²Œì‹œê¸€ ëª©ë¡ í–‰ì— ì¸ë„¤ì¼ í‘œì‹œ -->
<tbody class="bg-white divide-y divide-gray-200">
    <c:forEach var="board" items="${boards}">
        <tr class="hover:bg-gray-50">
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${board.id}</td>

            <!-- ì¸ë„¤ì¼ í‘œì‹œ -->
            <td class="px-6 py-4 whitespace-nowrap">
                <c:if test="${not empty board.thumbnailPath}">
                    <img src="${board.thumbnailPath}"
                         alt="ê²Œì‹œê¸€ ì¸ë„¤ì¼"
                         class="w-16 h-16 object-cover rounded-lg border border-gray-200 hover:scale-110 transition-transform cursor-pointer"
                         onclick="showImagePreview('${board.thumbnailPath}', '${board.title}')">
                </c:if>
            </td>

            <!-- ë‚˜ë¨¸ì§€ ì»¬ëŸ¼ë“¤... -->
        </tr>
    </c:forEach>
</tbody>
```

#### view.jsp ìˆ˜ì • (ê²Œì‹œê¸€ ìƒì„¸ë³´ê¸°ì—ì„œ ì¸ë„¤ì¼ í‘œì‹œ)

```jsp
<!-- ì²¨ë¶€íŒŒì¼ ì„¹ì…˜ì— ì¸ë„¤ì¼ í‘œì‹œ ì¶”ê°€ -->
<c:if test="${not empty board.files and board.files.size() > 0}">
    <div class="px-6 py-4 border-b border-gray-200 bg-blue-50">
        <h3 class="text-sm font-medium text-gray-900 mb-3 flex items-center">
            <svg class="w-4 h-4 mr-2 text-blue-500" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clip-rule="evenodd"></path>
            </svg>
            ì²¨ë¶€íŒŒì¼ (${board.files.size()}ê°œ)
        </h3>

        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3">
            <c:forEach var="file" items="${board.files}">
                <div class="flex items-center p-3 bg-white rounded-lg border border-gray-200 hover:border-blue-300 transition-colors">

                    <!-- ì´ë¯¸ì§€ íŒŒì¼ì¸ ê²½ìš° ì¸ë„¤ì¼ í‘œì‹œ -->
                    <c:if test="${file.imageFile}">
                        <div class="flex-shrink-0 mr-3">
                            <c:choose>
                                <c:when test="${not empty file.thumbnailSmallPath}">
                                    <img src="${file.thumbnailSmallPath}"
                                         alt="${file.originalName}"
                                         class="w-12 h-12 object-cover rounded border border-gray-200 hover:scale-110 transition-transform cursor-pointer"
                                         onclick="showImagePreview('${file.thumbnailMediumPath}', '${file.originalName}')">
                                </c:when>
                                <c:otherwise>
                                    <!-- ì¸ë„¤ì¼ì´ ì—†ëŠ” ê²½ìš° ê¸°ë³¸ ì•„ì´ì½˜ -->
                                    <svg class="w-12 h-12 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clip-rule="evenodd"></path>
                                    </svg>
                                </c:otherwise>
                            </c:choose>
                        </div>
                    </c:if>

                    <!-- íŒŒì¼ ì •ë³´ ë° ë‹¤ìš´ë¡œë“œ ë²„íŠ¼... -->
                </div>
            </c:forEach>
        </div>
    </div>
</c:if>

<!-- ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° ëª¨ë‹¬ -->
<div id="imagePreviewModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
    <div class="flex items-center justify-center min-h-screen p-4">
        <div class="bg-white rounded-lg max-w-4xl max-h-full overflow-auto">
            <div class="p-4 border-b border-gray-200 flex justify-between items-center">
                <h3 id="imagePreviewTitle" class="text-lg font-medium text-gray-900"></h3>
                <button onclick="closeImagePreview()" class="text-gray-400 hover:text-gray-600">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            <div class="p-4">
                <img id="imagePreviewImg" src="" alt="" class="max-w-full max-h-96 mx-auto">
            </div>
        </div>
    </div>
</div>

<script>
function showImagePreview(imagePath, title) {
    document.getElementById('imagePreviewImg').src = imagePath;
    document.getElementById('imagePreviewTitle').textContent = title;
    document.getElementById('imagePreviewModal').classList.remove('hidden');
}

function closeImagePreview() {
    document.getElementById('imagePreviewModal').classList.add('hidden');
}

// ESC í‚¤ë¡œ ëª¨ë‹¬ ë‹«ê¸°
document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
        closeImagePreview();
    }
});
</script>
```

## ğŸ“ ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] ThumbnailGenerator ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤ ìƒì„±
- [ ] FileUpload ëª¨ë¸ì— ì¸ë„¤ì¼ ì •ë³´ í•„ë“œ ì¶”ê°€
- [ ] FileUploadDAOì— ì¸ë„¤ì¼ ê´€ë ¨ ë©”ì„œë“œ ì¶”ê°€
- [ ] FileUploadCommandì—ì„œ ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹œ ì¸ë„¤ì¼ ìë™ ìƒì„±
- [ ] list.jspì—ì„œ ê²Œì‹œê¸€ ëª©ë¡ì— ì¸ë„¤ì¼ í‘œì‹œ
- [ ] view.jspì—ì„œ ì²¨ë¶€íŒŒì¼ ì¸ë„¤ì¼ ë° ë¯¸ë¦¬ë³´ê¸° ê¸°ëŠ¥ êµ¬í˜„
- [ ] ì¸ë„¤ì¼ ìƒì„± ë° í‘œì‹œ í…ŒìŠ¤íŠ¸ ì™„ë£Œ

## âš ï¸ ì£¼ì˜ì‚¬í•­

### 1. ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­

- **ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰**: ëŒ€ìš©ëŸ‰ ì´ë¯¸ì§€ ì²˜ë¦¬ ì‹œ ë©”ëª¨ë¦¬ ë¶€ì¡± ë°©ì§€
- **ë¹„ë™ê¸° ì²˜ë¦¬**: ì¸ë„¤ì¼ ìƒì„±ì„ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì²˜ë¦¬
- **ìºì‹±**: ìƒì„±ëœ ì¸ë„¤ì¼ì˜ ì¬ì‚¬ìš©ìœ¼ë¡œ ì¤‘ë³µ ìƒì„± ë°©ì§€

### 2. íŒŒì¼ ê´€ë¦¬

- **ë””ë ‰í† ë¦¬ êµ¬ì¡°**: ì¸ë„¤ì¼ íŒŒì¼ì˜ ì²´ê³„ì ì¸ ì €ì¥ ë° ê´€ë¦¬
- **ì •ë¦¬ ì‘ì—…**: ì›ë³¸ íŒŒì¼ ì‚­ì œ ì‹œ ì—°ê´€ëœ ì¸ë„¤ì¼ë„ í•¨ê»˜ ì‚­ì œ
- **ë°±ì—…**: ì¤‘ìš”í•œ ì¸ë„¤ì¼ íŒŒì¼ì˜ ë°±ì—… ì „ëµ ìˆ˜ë¦½

### 3. ì‚¬ìš©ì ê²½í—˜

- **ë¡œë”© í‘œì‹œ**: ì¸ë„¤ì¼ ìƒì„± ì¤‘ ì‚¬ìš©ìì—ê²Œ í”¼ë“œë°± ì œê³µ
- **í´ë°± ì²˜ë¦¬**: ì¸ë„¤ì¼ ìƒì„± ì‹¤íŒ¨ ì‹œ ê¸°ë³¸ ì•„ì´ì½˜ í‘œì‹œ
- **ë°˜ì‘í˜• ì´ë¯¸ì§€**: ë‹¤ì–‘í•œ í™”ë©´ í¬ê¸°ì— ìµœì í™”ëœ ì¸ë„¤ì¼ ì œê³µ

## ğŸ¯ í…ŒìŠ¤íŠ¸ ë°©ë²•

### 1. ê¸°ë³¸ ì¸ë„¤ì¼ ìƒì„± í…ŒìŠ¤íŠ¸

- ì´ë¯¸ì§€ íŒŒì¼ ì—…ë¡œë“œ í›„ ì¸ë„¤ì¼ ìë™ ìƒì„± í™•ì¸
- ë‹¤ì–‘í•œ í¬ê¸°ì˜ ì¸ë„¤ì¼ íŒŒì¼ ìƒì„± í™•ì¸
- ì¸ë„¤ì¼ íŒŒì¼ì˜ í’ˆì§ˆ ë° í¬ê¸° ê²€ì¦

### 2. UI í‘œì‹œ í…ŒìŠ¤íŠ¸

- ê²Œì‹œê¸€ ëª©ë¡ì—ì„œ ì¸ë„¤ì¼ í‘œì‹œ í™•ì¸
- ê²Œì‹œê¸€ ìƒì„¸ë³´ê¸°ì—ì„œ ì¸ë„¤ì¼ ë° ë¯¸ë¦¬ë³´ê¸° ê¸°ëŠ¥ í™•ì¸
- ì¸ë„¤ì¼ í´ë¦­ ì‹œ ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° ëª¨ë‹¬ ë™ì‘ í™•ì¸

### 3. ì—ëŸ¬ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸

- ì¸ë„¤ì¼ ìƒì„± ì‹¤íŒ¨ ì‹œ ê¸°ë³¸ ì•„ì´ì½˜ í‘œì‹œ í™•ì¸
- ì§€ì›í•˜ì§€ ì•ŠëŠ” ì´ë¯¸ì§€ í¬ë§· ì²˜ë¦¬ í™•ì¸
- ëŒ€ìš©ëŸ‰ ì´ë¯¸ì§€ ì²˜ë¦¬ ì‹œ ë©”ëª¨ë¦¬ ê´€ë¦¬ í™•ì¸

## ğŸ”— ë‹¤ìŒ ë‹¨ê³„

ì´ë¯¸ì§€ ì¸ë„¤ì¼ ìƒì„± ì‹œìŠ¤í…œ êµ¬í˜„ ì™„ë£Œ í›„:

1. **step03**: ëŒ€ìš©ëŸ‰ íŒŒì¼ ì—…ë¡œë“œ ì²˜ë¦¬ (ì²­í¬ ì—…ë¡œë“œ, ì§„í–‰ë¥  í‘œì‹œ)
2. **step04**: ê³ ê¸‰ ê²€ìƒ‰ ê¸°ëŠ¥ êµ¬í˜„ (í†µí•© ê²€ìƒ‰, í•„í„°ë§, ì •ë ¬)

ì´ì œ íš¨ìœ¨ì ì¸ ì¸ë„¤ì¼ ì‹œìŠ¤í…œìœ¼ë¡œ ì´ë¯¸ì§€ ë¡œë”© ì„±ëŠ¥ì„ í¬ê²Œ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤!
