# 2ë‹¨ê³„: ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ ê¸°ëŠ¥ êµ¬í˜„

## ğŸ¯ ëª©í‘œ

ì‚¬ìš©ì ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ì—¬ ì¸ì¦ëœ ì‚¬ìš©ìë§Œ ì‹œìŠ¤í…œì„ ì´ìš©í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.

## âš ï¸ ì¤‘ìš”: ê¸°ì¡´ ì‹œìŠ¤í…œì˜ í•œê³„

**í˜„ì¬ ìƒí™©**: íšŒì›ê°€ì…ì€ ê°€ëŠ¥í•˜ì§€ë§Œ ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ ê¸°ëŠ¥ ì—†ìŒ

- **ì„¸ì…˜ ê´€ë¦¬**: ì‚¬ìš©ì ë¡œê·¸ì¸ ìƒíƒœ ìœ ì§€ ë¶ˆê°€
- **ì¸ì¦ ê²€ì¦**: ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì™€ ë¹„ë¡œê·¸ì¸ ì‚¬ìš©ì êµ¬ë¶„ ë¶ˆê°€
- **ë³´ì•ˆ ì·¨ì•½**: ì¸ì¦ ì—†ì´ ëª¨ë“  ê¸°ëŠ¥ ì ‘ê·¼ ê°€ëŠ¥

## ğŸ“š ì´ë¡  í¬ì¸íŠ¸ ë¦¬ë§ˆì¸ë“œ

### **ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ ì‹œìŠ¤í…œì˜ í•µì‹¬**

- **ì„¸ì…˜ ê´€ë¦¬**: HttpSessionì„ ì‚¬ìš©í•œ ì‚¬ìš©ì ìƒíƒœ ìœ ì§€
- **ì¸ì¦ ê²€ì¦**: ì•„ì´ë””/ë¹„ë°€ë²ˆí˜¸ ë§¤ì¹­ìœ¼ë¡œ ì‚¬ìš©ì í™•ì¸
- **ë³´ì•ˆ ì²˜ë¦¬**: ë¡œê·¸ì¸ ì‹¤íŒ¨ ì‹œ ì ì ˆí•œ ì—ëŸ¬ ë©”ì‹œì§€
- **ìƒíƒœ ì „í™˜**: ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ ì‹œ ì ì ˆí•œ í˜ì´ì§€ ì´ë™

### **ë³´ì•ˆ ê³ ë ¤ì‚¬í•­**

- **ì„¸ì…˜ í•˜ì´ì¬í‚¹ ë°©ì§€**: ì„¸ì…˜ ID ë³´ì•ˆ ê´€ë¦¬
- **ë¹„ë°€ë²ˆí˜¸ ê²€ì¦**: í•´ì‹œëœ ë¹„ë°€ë²ˆí˜¸ì™€ ì…ë ¥ê°’ ë¹„êµ
- **ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬**: ì„¸ì…˜ ë¬´íš¨í™” ë° ë¦¬ì†ŒìŠ¤ ì •ë¦¬
- **ì—ëŸ¬ ë©”ì‹œì§€**: ë³´ì•ˆì„ ìœ„í•´ êµ¬ì²´ì ì¸ ì‹¤íŒ¨ ì›ì¸ ë…¸ì¶œ ê¸ˆì§€

## ğŸ“‹ ì¤€ë¹„ì‚¬í•­

- 1ë‹¨ê³„ ì™„ë£Œ (íšŒì›ê°€ì… ê¸°ëŠ¥ êµ¬í˜„)
- users í…Œì´ë¸”ì— í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì ë°ì´í„° ì¡´ì¬
- Spring Framework ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš© ê°€ëŠ¥

## ğŸš€ ì‹¤ìŠµ ë‹¨ê³„ë³„ ì§„í–‰

### 0ë‹¨ê³„: í˜„ì¬ ìƒíƒœ í™•ì¸

**íšŒì›ê°€ì… ê¸°ëŠ¥ì´ ì •ìƒ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.**

1. `http://localhost:8080/front?command=signup` ì ‘ì† í™•ì¸
2. í…ŒìŠ¤íŠ¸ ì‚¬ìš©ìë¡œ íšŒì›ê°€ì… ì™„ë£Œ
3. H2 ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ users í…Œì´ë¸” ë°ì´í„° í™•ì¸

### 1ë‹¨ê³„: UserDAOì— ë¡œê·¸ì¸ ë©”ì„œë“œ ì¶”ê°€

`src/main/java/io/goorm/backend/UserDAO.java` ìˆ˜ì •:

```java
// ê¸°ì¡´ ì½”ë“œì— ì¶”ê°€

// ë¡œê·¸ì¸ ê²€ì¦ (ì•„ì´ë””/ë¹„ë°€ë²ˆí˜¸ í™•ì¸)
public User login(String username, String password) {
            String sql = "SELECT * FROM users WHERE username = ? AND password = ?";
    try {
        return jdbcTemplate.queryForObject(sql, userRowMapper, username, password);
    } catch (Exception e) {
        return null;
    }
}

// ì‚¬ìš©ì IDë¡œ ì‚¬ìš©ì ì¡°íšŒ
public User getUserById(Long userId) {
            String sql = "SELECT * FROM users WHERE id = ?";
    try {
        return jdbcTemplate.queryForObject(sql, userRowMapper, userId);
    } catch (Exception e) {
        return null;
    }
}
```

### 2ë‹¨ê³„: LoginCommand í´ë˜ìŠ¤ ìƒì„±

`src/main/java/io/goorm/backend/command/LoginCommand.java` ìƒì„±:

```java
package io.goorm.backend.command;

import io.goorm.backend.User;
import io.goorm.backend.UserDAO;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;
import java.security.MessageDigest;

public class LoginCommand implements Command {

    @Override
    public String execute(HttpServletRequest request, HttpServletResponse response) {
        try {
            if (request.getMethod().equals("GET")) {
                // ë¡œê·¸ì¸ í¼ í‘œì‹œ
                return "/user/login.jsp";
            } else {
                // POST ìš”ì²­ - ë¡œê·¸ì¸ ì²˜ë¦¬
                request.setCharacterEncoding("UTF-8");

                String username = request.getParameter("username");
                String password = request.getParameter("password");

                // ìœ íš¨ì„± ê²€ì‚¬
                if (username == null || username.trim().isEmpty() ||
                    password == null || password.trim().isEmpty()) {
                    request.setAttribute("error", "ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                    return "/user/login.jsp";
                }

                // ë¹„ë°€ë²ˆí˜¸ í•´ì‹œ
                String hashedPassword = hashPassword(password);

                // ë¡œê·¸ì¸ ê²€ì¦
                UserDAO userDAO = new UserDAO();
                User user = userDAO.login(username, hashedPassword);

                if (user != null) {
                    // ë¡œê·¸ì¸ ì„±ê³µ - ì„¸ì…˜ì— ì‚¬ìš©ì ì •ë³´ ì €ì¥
                    HttpSession session = request.getSession();
                    session.setAttribute("user", user);

                    // ê²Œì‹œíŒ ëª©ë¡ìœ¼ë¡œ ì´ë™
                    response.sendRedirect("front?command=boardList");
                    return null;
                } else {
                    // ë¡œê·¸ì¸ ì‹¤íŒ¨
                    request.setAttribute("error", "ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.");
                    return "/user/login.jsp";
                }
            }

        } catch (Exception e) {
            request.setAttribute("error", "ë¡œê·¸ì¸ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
            return "/user/login.jsp";
        }
    }

    // ë¹„ë°€ë²ˆí˜¸ í•´ì‹œ í•¨ìˆ˜ (SignupCommandì™€ ë™ì¼)
    private String hashPassword(String password) {
        try {
            MessageDigest md = MessageDigest.getInstance("MD5");
            byte[] hash = md.digest(password.getBytes());
            StringBuilder sb = new StringBuilder();
            for (byte b : hash) {
                sb.append(String.format("%02x", b));
            }
            return sb.toString();
        } catch (Exception e) {
            return password;
        }
    }
}
```

### 3ë‹¨ê³„: LogoutCommand í´ë˜ìŠ¤ ìƒì„±

`src/main/java/io/goorm/backend/command/LogoutCommand.java` ìƒì„±:

```java
package io.goorm.backend.command;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

public class LogoutCommand implements Command {

    @Override
    public String execute(HttpServletRequest request, HttpServletResponse response) {
        try {
            // ì„¸ì…˜ ë¬´íš¨í™”
            HttpSession session = request.getSession(false);
            if (session != null) {
                session.invalidate();
            }

            // ê²Œì‹œíŒ ëª©ë¡ìœ¼ë¡œ ì´ë™
            response.sendRedirect("front?command=boardList");
            return null;

        } catch (Exception e) {
            // ì—ëŸ¬ ë°œìƒ ì‹œì—ë„ ê²Œì‹œíŒ ëª©ë¡ìœ¼ë¡œ ì´ë™
            try {
                response.sendRedirect("front?command=boardList");
            } catch (Exception ex) {
                // ìµœí›„ì˜ ìˆ˜ë‹¨ìœ¼ë¡œ ì—ëŸ¬ í˜ì´ì§€ ë°˜í™˜
                return "/error.jsp";
            }
            return null;
        }
    }
}
```

### 4ë‹¨ê³„: HandlerMappingì— Command ì¶”ê°€

`src/main/java/io/goorm/backend/handler/HandlerMapping.java` ìˆ˜ì •:

```java
// ê¸°ì¡´ ì½”ë“œì— ì¶”ê°€
commandMap.put("login", new LoginCommand());
commandMap.put("logout", new LogoutCommand());
```

### 5ë‹¨ê³„: ë¡œê·¸ì¸ JSP íŒŒì¼ ìƒì„±

`src/main/webapp/user/login.jsp` ìƒì„±:

```jsp
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<html>
<head>
    <title>ë¡œê·¸ì¸</title>
</head>
<body>
    <h1>ë¡œê·¸ì¸</h1>

    <c:if test="${not empty error}">
        <p style="color: red;">${error}</p>
    </c:if>

    <form action="front?command=login" method="post">
        <p>
            <label>ì•„ì´ë””:</label>
            <input type="text" name="username" required>
        </p>
        <p>
            <label>ë¹„ë°€ë²ˆí˜¸:</label>
            <input type="password" name="password" required>
        </p>
        <p>
            <input type="submit" value="ë¡œê·¸ì¸">
            <a href="front?command=signup">íšŒì›ê°€ì…</a>
        </p>
    </form>

    <p>
        <a href="front?command=boardList">â† ê²Œì‹œíŒìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
    </p>
</body>
</html>
```

### 6ë‹¨ê³„: ê¸°ì¡´ JSPì— ë¡œê·¸ì¸ ìƒíƒœ í‘œì‹œ ì¶”ê°€

`src/main/webapp/board/list.jsp` ìˆ˜ì • (í—¤ë” ë¶€ë¶„):

```jsp
<!-- ê¸°ì¡´ ì½”ë“œ ìƒë‹¨ì— ì¶”ê°€ -->
<div style="text-align: right; margin: 10px;">
    <c:choose>
        <c:when test="${not empty sessionScope.user}">
                         ì•ˆë…•í•˜ì„¸ìš”, ${sessionScope.user.name}ë‹˜!
            <a href="front?command=logout">ë¡œê·¸ì•„ì›ƒ</a>
        </c:when>
        <c:otherwise>
            <a href="front?command=login">ë¡œê·¸ì¸</a> |
            <a href="front?command=signup">íšŒì›ê°€ì…</a>
        </c:otherwise>
    </c:choose>
</div>
```

## ğŸ“ ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] UserDAOì— ë¡œê·¸ì¸ ë©”ì„œë“œ ì¶”ê°€
- [ ] LoginCommand í´ë˜ìŠ¤ ìƒì„±
- [ ] LogoutCommand í´ë˜ìŠ¤ ìƒì„±
- [ ] HandlerMappingì— login, logout ì¶”ê°€
- [ ] login.jsp íŒŒì¼ ìƒì„±
- [ ] ê¸°ì¡´ JSPì— ë¡œê·¸ì¸ ìƒíƒœ í‘œì‹œ ì¶”ê°€
- [ ] ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸

## âš ï¸ ì£¼ì˜ì‚¬í•­

- **ì„¸ì…˜ ê´€ë¦¬**: ë¡œê·¸ì¸ ì„±ê³µ ì‹œ ì„¸ì…˜ì— ì‚¬ìš©ì ì •ë³´ ì €ì¥ í•„ìˆ˜
- **ë¹„ë°€ë²ˆí˜¸ í•´ì‹œ**: íšŒì›ê°€ì…ê³¼ ë™ì¼í•œ í•´ì‹œ ì•Œê³ ë¦¬ì¦˜ ì‚¬ìš©
- **ì—ëŸ¬ ë©”ì‹œì§€**: ë³´ì•ˆì„ ìœ„í•´ êµ¬ì²´ì ì¸ ì‹¤íŒ¨ ì›ì¸ ë…¸ì¶œ ê¸ˆì§€
- **ì„¸ì…˜ ë¬´íš¨í™”**: ë¡œê·¸ì•„ì›ƒ ì‹œ ë°˜ë“œì‹œ ì„¸ì…˜ ë¬´íš¨í™”

## ğŸ¯ í…ŒìŠ¤íŠ¸ ë°©ë²•

1. **ë¡œê·¸ì¸ í¼**: `http://localhost:8080/front?command=login`
2. **ì •ìƒ ë¡œê·¸ì¸**: ê°€ì…í•œ ì•„ì´ë””/ë¹„ë°€ë²ˆí˜¸ë¡œ ë¡œê·¸ì¸
3. **ì˜ëª»ëœ ì •ë³´**: ì˜ëª»ëœ ì•„ì´ë””/ë¹„ë°€ë²ˆí˜¸ë¡œ ë¡œê·¸ì¸ ì‹œë„
4. **ë¡œê·¸ì•„ì›ƒ**: ë¡œê·¸ì¸ í›„ ë¡œê·¸ì•„ì›ƒ ê¸°ëŠ¥ í™•ì¸
5. **ì„¸ì…˜ ìƒíƒœ**: ê²Œì‹œíŒ ëª©ë¡ì—ì„œ ë¡œê·¸ì¸ ìƒíƒœ í‘œì‹œ í™•ì¸

## ğŸ¨ JSP ì†ŒìŠ¤ ì°¸ê³ 

**HTML/Tailwind CSS ë²„ì „**ì˜ ë¡œê·¸ì¸ í¼ì´ `jsp/login.html`ì— ì œê³µë©ë‹ˆë‹¤.

### íŠ¹ì§•

- **ê¹”ë”í•œ ë””ìì¸**: Tailwind CSSë¥¼ ì‚¬ìš©í•œ ëª¨ë˜í•œ UI
- **ì‚¬ìš©ì ê²½í—˜**: ì§ê´€ì ì¸ í¼ ë ˆì´ì•„ì›ƒ
- **ë°˜ì‘í˜• ë””ìì¸**: ëª¨ë“  ë””ë°”ì´ìŠ¤ì—ì„œ ìµœì í™”ëœ í‘œì‹œ

**ì°¸ê³ **: ì´ HTML íŒŒì¼ì„ JSPë¡œ ë³€í™˜í•˜ì—¬ ì‚¬ìš©í•˜ê±°ë‚˜, ë””ìì¸ ì°¸ê³ ìš©ìœ¼ë¡œ í™œìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ğŸ”— ë‹¤ìŒ ë‹¨ê³„

ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ ê¸°ëŠ¥ì´ ì™„ë£Œë˜ë©´ ë‹¤ìŒ ë‹¨ê³„ì¸ **ê¶Œí•œ ì œì–´ êµ¬í˜„**ì„ ì§„í–‰í•©ë‹ˆë‹¤.

---

**2ë‹¨ê³„ ì™„ë£Œ í›„**: ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒì´ ì •ìƒ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•˜ê³ , ë‹¤ìŒ ë‹¨ê³„ì¸ ê¶Œí•œ ì œì–´ êµ¬í˜„ì„ ì§„í–‰í•©ë‹ˆë‹¤.
